# TIL

## Node.js

### 정의

노드는 이벤트 기반, 논블로킹 모델이며, 싱글 쓰레드이다.

자바스크립트 기반 런타임이다. - 노드 = 자바스크립트 실행기

### 설명

- 이벤트 기반

  - 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
  - 이벤트 리스너에 콜백 함수를 등록

  - 이벤트 루프

    - 여러 이벤트가 동시에 발생 했을 때 어떤 순서로 콜백 함수를 호출 할지 판단.
    - 정의 :
      이벤트 발생 시 호출 할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정함.
      노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복함으로 루프라고 부름.

  - 이벤트 루프의 과정
    - 호출 스택에서 anonymous 함수가 실행
    - 비동기 함수가 있을 경우 백그라운드 영역으로 이동 됨
    - 백그라운드 영역에서 해당 타이머 기능 등이 처리 되면 테스크 큐로 이동됨.(테스크 큐에서도 우선 순위를 지정 해둠)
    - 호출 스택의 처리가 다 끝나고 비어 있는 상태가 될 시 테스크 큐에서 호출 스택으로 이동됨.
    - 해당 함수 처리

- 논 블로킹 I/O
  이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행

  자바스크립트 코드는 동시에 실행 될 수 없음.

  하지만 자바스크립트상에서 돌아가는 것이 아닌 I/O 작업 같은 것은 동시에 처리 될 수 있음

  - I/O
    - 입력 / 출력을 의미. 파일 시스템의 접근(파일 읽기, 쓰기, 폴더 만들기 등)이나 네트워크를 통한 요청 같은 작업이 I/O의 일종

  이벤트 루프를 이용하여 작업을 효율적으로 처리 할 수 있음

- 싱글 스레드

  작업을 처리하는 흐름이 한개 인 것

  노드를 실행했을 때 개발자가 직접 제어 할 수 있는 스레드가 1개라는 의미

  이러한 이유로 인해 자바스크립트는 동시에 실행 될 수 없음.

---

- 서버로서의 노드
  - 장점 : 갯수는 많지만 크기는 작은 데이터를 실시간으로 주고 받을 때 적합.
  - 단점 : CPU 부하가 큰 작업에 적합하지 않음.
    - 이미지, 비디오 처리, 혹은 대규모 데이터 처리처럼 CPU를 많이 사용 하는 작업을 위한 서버로는 권장 되지 않음
